# 实验: 创建图的类

## 打开实验文件

单击右方的[在线代码段Url网址](http://pythontutor.com/visualize.html#code=class%20Vertex%3A%0A%20%20%20%20def%20__init__%28self,key%29%3A%0A%20%20%20%20%20%20%20%20self.id%20%3D%20key%0A%20%20%20%20%20%20%20%20self.connectedTo%20%3D%20%7B%7D%0A%20%20%20%20def%20addNeighbor%28self,nbr,weight%3D0%29%3Aself.connectedTo%5Bnbr%5D%20%3D%20weight%0A%20%20%20%20def%20__str__%28self%29%3Areturn%20str%28self.id%29%20%2B%20'%20connectedTo%3A%20'%20%2B%20str%28%5Bx.id%20for%20x%20in%20self.connectedTo%5D%29%0A%20%20%20%20def%20getConnections%28self%29%3Areturn%20self.connectedTo.keys%28%29%0A%20%20%20%20def%20getId%28self%29%3Areturn%20self.id%0A%20%20%20%20def%20getWeight%28self,nbr%29%3Areturn%20self.connectedTo%5Bnbr%5D%0A%0Aclass%20Graph%3A%0A%20%20%20%20def%20__init__%28self%29%3A%0A%20%20%20%20%20%20%20%20self.vertList%20%3D%20%7B%7D%0A%20%20%20%20%20%20%20%20self.numVertices%20%3D%200%0A%20%20%20%20def%20addVertex%28self,key%29%3A%0A%20%20%20%20%20%20%20%20self.numVertices%20%3D%20self.numVertices%20%2B%201%0A%20%20%20%20%20%20%20%20newVertex%20%3D%20Vertex%28key%29%0A%20%20%20%20%20%20%20%20self.vertList%5Bkey%5D%20%3D%20newVertex%0A%20%20%20%20%20%20%20%20return%20newVertex%0A%20%20%20%20def%20getVertex%28self,n%29%3A%0A%20%20%20%20%20%20%20%20if%20n%20in%20self.vertList%3Areturn%20self.vertList%5Bn%5D%0A%20%20%20%20%20%20%20%20else%3Areturn%20None%0A%20%20%20%20def%20__contains__%28self,n%29%3Areturn%20n%20in%20self.vertList%0A%20%20%20%20def%20addEdge%28self,f,t,weight%3D0%29%3A%0A%20%20%20%20%20%20%20%20if%20f%20not%20in%20self.vertList%3Anv%20%3D%20self.addVertex%28f%29%0A%20%20%20%20%20%20%20%20if%20t%20not%20in%20self.vertList%3Anv%20%3D%20self.addVertex%28t%29%0A%20%20%20%20%20%20%20%20self.vertList%5Bf%5D.addNeighbor%28self.vertList%5Bt%5D,%20weight%29%0A%20%20%20%20def%20getVertices%28self%29%3Areturn%20self.vertList.keys%28%29%0A%20%20%20%20def%20__iter__%28self%29%3Areturn%20iter%28self.vertList.values%28%29%29%0A%0Ag%20%3D%20Graph%28%29%0Afor%20i%20in%20range%286%29%3A%0A%20%20%20%20g.addVertex%28i%29%0Ag.vertList%0Ag.addEdge%280,1,5%29%0Ag.addEdge%280,5,2%29%0Ag.addEdge%281,2,4%29%0Ag.addEdge%282,3,9%29%0Ag.addEdge%283,4,7%29%0Ag.addEdge%283,5,3%29%0Ag.addEdge%284,0,9%29%0Ag.addEdge%285,4,8%29%0Ag.addEdge%285,2,5%29%0A%0Afor%20v%20in%20g%3A%0A%20%20%20%20for%20w%20in%20v.getConnections%28%29%3A%0A%20%20%20%20%20%20%20%20print%28%22%28%20%25s%20,%20%25s%20%29%22%20%25%20%28v.getId%28%29,%20w.getId%28%29%29%29&cumulative=false&heapPrimitives=nevernest&mode=edit&origin=opt-frontend.js&py=3&rawInputLstJSON=%5B%5D&textReferences=false)，浏览器里会打开一个新的页面，里面有下面的代码段。

```python
class Vertex:
    def __init__(self,key):
        self.id = key
        self.connectedTo = {}
    def addNeighbor(self,nbr,weight=0):self.connectedTo[nbr] = weight
    def __str__(self):return str(self.id) + ' connectedTo: ' + str([x.id for x in self.connectedTo])
    def getConnections(self):return self.connectedTo.keys()
    def getId(self):return self.id
    def getWeight(self,nbr):return self.connectedTo[nbr]

class Graph:
    def __init__(self):
        self.vertList = {}
        self.numVertices = 0
    def addVertex(self,key):
        self.numVertices = self.numVertices + 1
        newVertex = Vertex(key)
        self.vertList[key] = newVertex
        return newVertex
    def getVertex(self,n):
        if n in self.vertList:return self.vertList[n]
        else:return None
    def __contains__(self,n):return n in self.vertList
    def addEdge(self,f,t,weight=0):
        if f not in self.vertList:nv = self.addVertex(f)
        if t not in self.vertList:nv = self.addVertex(t)
        self.vertList[f].addNeighbor(self.vertList[t], weight)
    def getVertices(self):return self.vertList.keys()
    def __iter__(self):return iter(self.vertList.values())

g = Graph()
for i in range(6):
    g.addVertex(i)
g.vertList
g.addEdge(0,1,5)
g.addEdge(0,5,2)
g.addEdge(1,2,4)
g.addEdge(2,3,9)
g.addEdge(3,4,7)
g.addEdge(3,5,3)
g.addEdge(4,0,9)
g.addEdge(5,4,8)
g.addEdge(5,2,5)

for v in g:
    for w in v.getConnections():
        print("( %s , %s )" % (v.getId(), w.getId()))
```

## 开始做实体实验

### 用实体模型表达上面代码段的运行过程1，分别如下图所示。

![](/images/章4-理解基本的数据结构/查询无序链表的数据节点/1a1.jpeg)
![](/images/章4-理解基本的数据结构/查询无序链表的数据节点/1a2.jpeg)
![](/images/章4-理解基本的数据结构/查询无序链表的数据节点/1a3.jpeg)

### 运行过程2，分别如下图所示。

![](/images/章4-理解基本的数据结构/查询无序链表的数据节点/2a1.jpeg)
![](/images/章4-理解基本的数据结构/查询无序链表的数据节点/2a2.jpeg)
![](/images/章4-理解基本的数据结构/查询无序链表的数据节点/2a3.jpeg)

## 参考文献及资料

1. 维基百科
	- [Graph (abstract data type)](https://en.wikipedia.org/wiki/Graph_(abstract_data_type)) 

2. [Implementation](https://runestone.academy/runestone/books/published/pythonds/Graphs/Implementation.htm) 